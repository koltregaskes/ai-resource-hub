---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Tooltip from '../../components/Tooltip.astro';
import LLMComparisonTable from '../../components/LLMComparisonTable';
import { getLLMModels } from '../../data/llm-models';

const models = getLLMModels();
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : `${rawBase}/`;
const lastUpdated = new Date().toLocaleDateString('en-GB', {
  day: 'numeric',
  month: 'short',
  year: 'numeric',
});

// Structured data for SEO
const structuredData = {
  '@context': 'https://schema.org',
  '@type': 'Dataset',
  name: 'AI Large Language Model Comparison',
  description: 'Independent comparison of LLM pricing, performance benchmarks, and value rankings.',
  url: new URL(`${base}compare/llm`, Astro.site).toString(),
  variableMeasured: [
    { '@type': 'PropertyValue', name: 'Input Price', unitText: 'USD per 1M tokens' },
    { '@type': 'PropertyValue', name: 'Output Price', unitText: 'USD per 1M tokens' },
    { '@type': 'PropertyValue', name: 'Context Window', unitText: 'tokens' },
    { '@type': 'PropertyValue', name: 'Speed', unitText: 'tokens per second' },
    { '@type': 'PropertyValue', name: 'Quality Score', unitText: 'points (0-100)' },
  ],
};
---

<BaseLayout
  title="LLM Comparison — The AI Resource Hub"
  description="Compare large language models by price, speed, quality, and value. GPT-4o, Claude Sonnet 4, Gemini 2.5 Pro, Llama 4, and more."
>
  <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
    <!-- Page header -->
    <div class="mb-8">
      <nav class="text-xs text-(--color-text-muted) mb-4" aria-label="Breadcrumb">
        <a href={base} class="hover:text-(--color-text-secondary) transition-colors">Home</a>
        <span class="mx-2">/</span>
        <span class="text-(--color-text-secondary)">LLM Comparison</span>
      </nav>

      <h1 class="text-3xl sm:text-4xl font-extrabold text-(--color-text-primary) mb-3">
        LLM Comparison Table
      </h1>
      <p class="text-(--color-text-secondary) max-w-2xl">
        Compare {models.length} large language models across
        <Tooltip term="pricing" tip="Cost per 1 million tokens for input and output. Input tokens are what you send; output tokens are what the model generates." />,
        <Tooltip term="context window" tip="The maximum number of tokens (roughly ¾ of a word each) a model can process in a single request — including your prompt, conversation history, and the model's response." />,
        <Tooltip term="speed" tip="Tokens generated per second. Higher means faster responses. Varies by provider load and prompt length." />, and
        <Tooltip term="quality benchmarks" tip="Standardised tests like MMLU (knowledge), GPQA (reasoning), HumanEval (coding), and Chatbot Arena (human preference)." />.
        Click any column header to sort.
      </p>
      <p class="text-xs text-(--color-text-muted) mt-2">
        Last updated: {lastUpdated} &middot; Prices from official API documentation
      </p>
      <a href={`${base}compare/head-to-head/`} class="inline-flex items-center gap-1.5 mt-3 px-4 py-2 rounded-lg bg-(--color-accent)/10 text-(--color-accent) hover:bg-(--color-accent)/20 transition-colors text-sm font-medium">
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>
        Head-to-Head Compare
      </a>
    </div>

    <!-- Interactive table (React island) -->
    <LLMComparisonTable client:load models={models} baseUrl={base} />
  </section>

  <!-- Structured data for SEO -->
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
</BaseLayout>
